{% extends "base.html" %}

{% block title %}Payments | Partner{% endblock %}

{% block sidebar %}
<nav class="nav">
  <a href="{{ url_for('partner.dashboard') }}" class="nav-item">Dashboard</a>
  <a href="{{ url_for('partner.leads_list') }}" class="nav-item">My Leads</a>
  <a href="{{ url_for('partner.payments_list') }}" class="nav-item active">Payments</a>
  <a href="{{ url_for('partner.reports') }}" class="nav-item">Reports</a>
  <a href="{{ url_for('partner.profile') }}" class="nav-item">Profile</a>
</nav>
{% endblock %}

{% block content %}
<h2 class="page-title">My Payments</h2>

<div class="card slide-up">
  <div class="table-wrapper">
    {% if payments %}
    <table class="table">
      <thead>
        <tr>
          <th>Lead</th>
          <th>Amount</th>
          <th>Status</th>
          <th>Due Date</th>
          <th>Released Date</th>
        </tr>
      </thead>
      <tbody>
        {% for pay in payments %}
        <tr>
          <td>{{ pay.lead_id }}</td>
          <td>₹{{ '%.0f'|format(pay.amount) }}</td>
          <td>
            {% if pay.status=='Pending' %}
            <span class="badge badge-muted">Pending</span>
            {% else %}
            <span class="badge badge-success">Released</span>
            {% endif %}
          </td>
          <td>{{ pay.due_date }}</td>
          <td>{{ pay.released_date or '—' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="table-empty">No payment records yet.</div>
    {% endif %}
  </div>
</div>
{% endblock %}

